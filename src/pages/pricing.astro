---
import MarketingLayout from '@/layouts/MarketingLayout.astro';
import PricingTable from '@sections/pricing/PricingTable.astro';
import ComparisonTable from '@sections/pricing/ComparisonTable.astro';
import TrustBadges from '@sections/pricing/TrustBadges.astro';
import FAQSection from '@sections/content/FAQSection.astro';
import CTA from '@sections/marketing/CTA.astro';
import { siteConfig } from '@/config';

const planNames = ['Hobby', 'Pro', 'Enterprise'];

const plans = [
  {
    name: 'Hobby',
    monthlyPrice: 0,
    description: 'Perfect for side projects and experiments',
    features: [
      '3 projects',
      '100 GB bandwidth/month',
      'Automatic HTTPS',
      'Preview deployments',
      'Community support',
    ],
    highlighted: false,
    cta: { label: 'Start Free', href: '/register' },
  },
  {
    name: 'Pro',
    monthlyPrice: 20,
    description: 'For professional developers and small teams',
    features: [
      'Unlimited projects',
      '1 TB bandwidth/month',
      'Team collaboration (5 members)',
      'Priority builds',
      'Advanced analytics',
      'Email support',
    ],
    highlighted: true,
    cta: { label: 'Start Free Trial', href: '/register' },
  },
  {
    name: 'Enterprise',
    monthlyPrice: null,
    customPrice: 'Custom',
    description: 'For organizations with advanced needs',
    features: [
      'Unlimited everything',
      'Custom bandwidth limits',
      'Unlimited team members',
      'SSO & SAML',
      'SLA guarantee',
      'Dedicated support',
      'Custom contracts',
    ],
    highlighted: false,
    cta: { label: 'Contact Sales', href: '/contact' },
  },
];

const faqs = [
  {
    question: 'Can I change plans later?',
    answer:
      "Yes, you can upgrade or downgrade your plan at any time. When upgrading, you'll be charged the prorated difference. When downgrading, the new rate applies at your next billing cycle.",
  },
  {
    question: 'What happens if I exceed my bandwidth limit?',
    answer:
      "We'll notify you when you're approaching your limit. If you exceed it, your sites will continue to work—we'll just reach out to discuss upgrading your plan or purchasing additional bandwidth.",
  },
  {
    question: 'Do you offer discounts for annual billing?',
    answer:
      'Yes! Annual plans come with a 20% discount. You can switch to annual billing from your account settings at any time.',
  },
  {
    question: 'Is there a free trial for paid plans?',
    answer:
      "Absolutely. All paid plans come with a 14-day free trial. No credit card required to start—you'll only be charged if you decide to continue after the trial.",
  },
  {
    question: 'What payment methods do you accept?',
    answer:
      'We accept all major credit cards (Visa, Mastercard, American Express) and PayPal. Enterprise customers can also pay via invoice with NET-30 terms.',
  },
  {
    question: "Can I get a refund if I'm not satisfied?",
    answer:
      "Yes, we offer a 30-day money-back guarantee on all paid plans. If you're not happy with Virex, contact support for a full refund.",
  },
];

const comparisonCategories = [
  {
    name: 'Usage',
    features: [
      { name: 'Projects', values: ['3', 'Unlimited', 'Unlimited'] },
      { name: 'Bandwidth', values: ['100 GB/mo', '1 TB/mo', 'Custom'] },
      { name: 'Build minutes', values: ['100/mo', '1,000/mo', 'Unlimited'] },
      { name: 'Concurrent builds', values: ['1', '3', '10+'] },
    ],
  },
  {
    name: 'Features',
    features: [
      { name: 'Preview deployments', values: [true, true, true] },
      { name: 'Automatic HTTPS', values: [true, true, true] },
      { name: 'Custom domains', values: ['1', '10', 'Unlimited'] },
      { name: 'Edge functions', values: [false, true, true] },
      { name: 'Analytics', values: [false, true, true] },
      { name: 'Password protection', values: [false, true, true] },
    ],
  },
  {
    name: 'Collaboration',
    features: [
      { name: 'Team members', values: [false, '5', 'Unlimited'] },
      { name: 'Role-based access', values: [false, true, true] },
      { name: 'Audit logs', values: [false, false, true] },
      { name: 'SSO/SAML', values: [false, false, true] },
    ],
  },
  {
    name: 'Support',
    features: [
      { name: 'Community support', values: [true, true, true] },
      { name: 'Email support', values: [false, true, true] },
      { name: 'Priority support', values: [false, false, true] },
      { name: 'Dedicated account manager', values: [false, false, true] },
      { name: 'SLA guarantee', values: [false, false, true] },
    ],
  },
];
---

<MarketingLayout
  title={`Pricing - ${siteConfig.name}`}
  description="Simple, transparent pricing for teams of all sizes. Start free and scale as you grow."
>
  <PricingTable
    title="Simple, transparent pricing"
    subtitle="Start free and scale as you grow. No hidden fees, no surprises."
    plans={plans}
    annualDiscount={20}
    defaultPeriod="monthly"
  />

  <TrustBadges
    guarantee={{
      title: '30-day money-back guarantee',
      description:
        'Try risk-free. Not satisfied? Get a full refund within 30 days, no questions asked.',
    }}
  />

  <ComparisonTable
    title="Compare plans in detail"
    subtitle="See exactly what's included in each plan."
    plans={planNames}
    categories={comparisonCategories}
    highlightedPlan={1}
    background="default"
  />

  <FAQSection
    title="Frequently asked questions"
    faqs={faqs}
    variant="simple"
    background="default"
  />

  <CTA
    title="Need something custom?"
    description="Have specific requirements or need a custom solution? Our team is happy to discuss your needs and create a plan that works for you."
    action={{ label: 'Talk to Sales', href: '/contact' }}
    background="muted"
  />
</MarketingLayout>
